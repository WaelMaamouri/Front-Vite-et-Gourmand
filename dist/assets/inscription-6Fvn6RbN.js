function e(t){const o=document.getElementById(t);return o?o.value.trim():""}function E(){const t=document.getElementById("form-inscription");console.log("form-inscription =",t),t&&t.addEventListener("submit",async o=>{var f,g;o.preventDefault();const s=e("prenom"),c=e("nom"),a=e("email"),i=e("gsm"),l=e("adresse"),d=e("ville"),m=e("code_postal"),n=((f=document.getElementById("mot_de_passe"))==null?void 0:f.value)||"",y=((g=document.getElementById("confirmation_mot_de_passe"))==null?void 0:g.value)||"";if(console.log({prenom:s,nom:c,email:a,gsm:i,adresse:l,ville:d,codePostalStr:m,passwordLen:n.length}),!s||!c||!a||!i||!l||!d||!m||!n){alert("Merci de remplir tous les champs obligatoires.");return}if(n!==y){alert("Les mots de passe ne correspondent pas.");return}const u=parseInt(m,10);if(Number.isNaN(u)){alert("Code postal invalide.");return}const p=document.getElementById("cgu");if(p&&!p.checked){alert("Vous devez accepter les conditions.");return}const v={prenom:s,nom:c,email:a,password:n,adresse:l,ville:d,codePostal:u,gsm:i};try{const r=await fetch("http://127.0.0.1:8000/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),h=await r.json().catch(()=>({}));if(!r.ok){alert(h.message||"Erreur lors de l'inscription.");return}alert("✅ Inscription réussie ! Vous pouvez vous connecter."),window.location.href="/connexion"}catch(r){console.error(r),alert("Erreur serveur. Vérifie que Symfony est démarré.")}})}export{E as bindInscriptionForm};
